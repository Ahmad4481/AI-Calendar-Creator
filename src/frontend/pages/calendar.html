<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="ุตูุญุฉ ุฅุนุฏุงุฏ ุงูุชูููู - ููุดุฆ ุงูุชูููู ุงูุฐูู">
  
  <!-- Theme & App Meta -->
  <meta name="theme-color" content="#2563EB">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="format-detection" content="telephone=no">
  
  <!-- Open Graph / Social Media -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="ุงูุชูููู - ููุดุฆ ุงูุชูููู">
  <meta property="og:description" content="ุตูุญุฉ ุฅุนุฏุงุฏ ุงูุชูููู - ููุดุฆ ุงูุชูููู ุงูุฐูู">
  <meta property="og:locale" content="ar_SA">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="../assets/images/logo.svg">
  <link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png">
  
  <!-- FullCalendar CSS - loaded via CDN (CSS is bundled with JS) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css">
  
  <!-- Vendor CSS - Third-party libraries from npm packages -->
  <link rel="stylesheet" href="../assets/css/vendor/vendor.css">
  
  <!-- Base CSS -->
  <link rel="stylesheet" href="../assets/css/base/global.css">
  <link rel="stylesheet" href="../assets/css/components/buttons.css">
  <link rel="stylesheet" href="../assets/css/components/modal.css">
  <link rel="stylesheet" href="../assets/css/components/calendar-form.css">
  <link rel="stylesheet" href="../assets/css/components/calendar-events.css">
  <link rel="stylesheet" href="../assets/css/components/event-form.css">
  <link rel="stylesheet" href="../assets/css/components/fullcalendar.css">
  <link rel="stylesheet" href="../assets/css/components/ai-chat.css">
  <!-- Custom vendor overrides (after vendor.css) -->
  <link rel="stylesheet" href="../assets/css/vendor/flatpickr.css">
  <link rel="stylesheet" href="../assets/css/vendor/choices.css">
  <link rel="stylesheet" href="../assets/css/components/sidebar.css">
  <link rel="stylesheet" href="../assets/css/components/layout.css">
  <link rel="stylesheet" href="../assets/css/components/stats.css">
  <link rel="stylesheet" href="../assets/css/components/header.css">
  <link rel="stylesheet" href="../assets/css/components/widgets.css">
  <link rel="stylesheet" href="../assets/css/components/ai-questions.css">
  <title>ุชูููู ุงูุฃุญุฏุงุซ - ููุดุฆ ุงูุชูููู</title>
</head>

<body>
  <!-- Mobile Menu Toggle -->
  <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="ูุชุญ ุงููุงุฆูุฉ">
    <i class="fa-solid fa-bars"></i>
  </button>
  
  <!-- Mobile Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar collapsed">
      <!-- Mobile Close Button -->
      <button class="mobile-close-btn" id="mobileCloseBtn" aria-label="ุฅุบูุงู ุงููุงุฆูุฉ">
        <i class="fa-solid fa-xmark"></i>
      </button>
      
      <div class="sidebar-header">
        <button class="sidebar-toggle" id="sidebarToggle">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <div class="logo">
          <img src="../assets/images/logo.svg" alt="ุดุนุงุฑ ููุดุฆ ุงูุชูููู" class="logo-icon" style="background: none; box-shadow: none;">
          <h2>ููุดุฆ ุงูุชูููู</h2>
        </div>
      </div>

      <nav class="sidebar-nav">
        <ul class="nav-list">
          <li class="nav-item">
            <a href="/pages/dashborad.html" class="nav-link">
              <span class="nav-icon" aria-hidden="true">
                <i class="fa-solid fa-house"></i>
              </span>
              <span class="nav-text">ุงูุฑุฆูุณูุฉ</span>
            </a>
          </li>
          <li class="nav-item active">
            <a href="/pages/calendar.html" class="nav-link">
              <span class="nav-icon" aria-hidden="true">
                <i class="fa-solid fa-calendar-days"></i>
              </span>
              <span class="nav-text">ุงูุชูููู</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="/pages/settings.html" class="nav-link">
              <span class="nav-icon" aria-hidden="true">
                <i class="fa-solid fa-gear"></i>
              </span>
              <span class="nav-text">ุงูุฅุนุฏุงุฏุงุช</span>
            </a>
          </li>
        </ul>
      </nav>

      <div class="sidebar-footer">
        <div class="user-profile">
          <div class="user-info">
            <div class="user-name">ุฃุญูุฏ ูุญูุฏ</div>
            <div class="user-email">ahmed@example.com</div>
          </div>
        </div>
        <button class="logout-btn">
          <span class="nav-icon" aria-hidden="true">
            <i class="fa-solid fa-right-from-bracket"></i>
          </span>
          <span class="nav-text">ุชุณุฌูู ุงูุฎุฑูุฌ</span>
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="dashboard-header">
        <button class="btn-toggle" id="aiChatToggle" aria-label="ูุชุญ ูุญุงุฏุซุฉ AI">
          <i class="fa-solid fa-robot" aria-hidden="true"></i>
        </button>
        <button class="btn-toggle" id="themeToggle">
          <i class="fa-solid fa-moon theme-icon" aria-hidden="true"></i>
        </button>
      </header>

      <div class="calendar-content">
        <div class="calendar-ai-layout">
          <aside class="ai-chat-panel" id="aiChatPanel" aria-label="ูุญุงุฏุซุฉ ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู">

            <div class="ai-chat-messages" id="aiChatMessages" role="log" aria-live="polite"></div>

            <form class="ai-chat-input" id="aiChatForm">
              <label class="visually-hidden" for="aiChatMessage">ุฅุฑุณุงู ุฑุณุงูุฉ ุฅูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</label>
              <div class="ai-chat-input-wrapper">
                <textarea id="aiChatMessage" name="message" rows="2"
                  placeholder="ุงุณุฃู ุนู ุฃู ุดูุก ูุชุนูู ุจุงูุชูููู ุฃู ุงูุฃุญุฏุงุซ..." required>
              </textarea>
                <button type="submit" class="ai-chat-send" aria-label="ุฅุฑุณุงู ุงูุฑุณุงูุฉ">
                  <i class="fa-solid fa-paper-plane"></i>
                </button>
              </div>
            </form>
          </aside>

          <div class="calendar-main">
            <section class="calendar-panel">

              <div class="calendar-panel-header">
                <button type="button" class="btn btn-primary" id="openEventModalBtn">
                  <span class="btn-icon" aria-hidden="true"><i class="fa-solid fa-plus"></i></span>
                  ุฅุถุงูุฉ ุญุฏุซ
                </button>
                <button class="add-system-btn" type="button" id="addSystemTrigger" aria-label="ุฅุถุงูุฉ ูุธุงูู">
                  <i class="fa-solid fa-layer-group" aria-hidden="true"></i>
                  ุฃุถู ูุธุงูู
                </button>
              </div>
              <div id="eventCalendar" class="calendar-widget"></div>
            </section>
          </div>
        </div>
      </div>
  </div>
  </main>
  </div>

  <!-- Add Calendar Modal -->
  <div class="modal-overlay" id="calendarModal">
    <div class="modal-container">
      <div class="modal-header">
        <h2>ุฅุถุงูุฉ ุชูููู ุฌุฏูุฏ</h2>
        <button class="modal-close" id="closeModal">โ</button>
      </div>

      <div class="modal-body">
        <!-- Progress Indicator -->
        <div class="form-progress">
          <div class="progress-step active" data-step="1">
            <div class="step-number">1</div>
            <div class="step-label">ุงูุฃุณุงุณูุงุช</div>
          </div>
          <div class="progress-step" data-step="2">
            <div class="step-number">2</div>
            <div class="step-label">ุงูุฃูุฏุงู</div>
          </div>
          <div class="progress-step" data-step="3">
            <div class="step-number">3</div>
            <div class="step-label">ุงูุฅุนุฏุงุฏุงุช</div>
          </div>
        </div>

        <!-- Form Steps -->
        <form class="calendar-form" id="calendarForm">
          <!-- Step 1: ุงูุฃุณุงุณูุงุช (ุงูุฃููุงุช ุบูุฑ ุงููุชุงุญุฉ + ุงูููุงู ุงูุซุงุจุชุฉ) -->
          <div class="form-step active" data-step="1">
            <div class="step-content">
              <h3>๐ซ ุงูุฃููุงุช ุบูุฑ ุงููุชุงุญุฉ</h3>
              <p class="step-description">ุญุฏุฏ ุงูุฃููุงุช ุงูุชู ูุง ููููู ุงูุนูู ูููุง (ุฏูุงูุ ุฏุฑุงุณุฉุ ุงูุชุฒุงูุงุช)</p>
              
              <div class="unavailable-times" id="unavailableTimes">
                <div class="unavailable-time-item">
                  <div class="form-row">
                    <div class="form-group">
                      <label>ูู ุงูุณุงุนุฉ</label>
                      <input type="time" name="unavailableStart" value="08:00">
                    </div>
                    <div class="form-group">
                      <label>ุฅูู ุงูุณุงุนุฉ</label>
                      <input type="time" name="unavailableEnd" value="15:00">
                    </div>
                  </div>
                  <div class="form-group">
                    <label>ุงูุฃูุงู</label>
                    <div class="days-selector">
                      <label class="day-checkbox"><input type="checkbox" name="unavailableDays" value="sunday"> ุฃุญุฏ</label>
                      <label class="day-checkbox"><input type="checkbox" name="unavailableDays" value="monday" checked> ุงุซููู</label>
                      <label class="day-checkbox"><input type="checkbox" name="unavailableDays" value="tuesday" checked> ุซูุงุซุงุก</label>
                      <label class="day-checkbox"><input type="checkbox" name="unavailableDays" value="wednesday" checked> ุฃุฑุจุนุงุก</label>
                      <label class="day-checkbox"><input type="checkbox" name="unavailableDays" value="thursday" checked> ุฎููุณ</label>
                      <label class="day-checkbox"><input type="checkbox" name="unavailableDays" value="friday"> ุฌูุนุฉ</label>
                      <label class="day-checkbox"><input type="checkbox" name="unavailableDays" value="saturday"> ุณุจุช</label>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group flex-grow">
                      <label>ุงูุณุจุจ (ุงุฎุชูุงุฑู)</label>
                      <input type="text" name="unavailableReason" placeholder="ูุซุงู: ุฏูุงู / ุฏุฑุงุณุฉ">
                    </div>
                    <div class="form-group">
                      <button type="button" class="btn btn-danger btn-sm remove-unavailable-time">
                        <i class="fa-solid fa-trash"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <button type="button" class="btn btn-secondary" id="addUnavailableTime">
                <span class="btn-icon"><i class="fa-solid fa-plus"></i></span>
                ุฅุถุงูุฉ ููุช ุบูุฑ ูุชุงุญ
              </button>

              <hr class="section-divider" style="margin: 2rem 0; border: 0; border-top: 1px solid var(--border);">

              <h3>๐ ุงูููุงู ุงูุซุงุจุชุฉ</h3>
              <p class="step-description">ุงูููุงู ุงููุชูุฑุฑุฉ ููููุงู ุฃู ุฃุณุจูุนูุงู (ุตูุงุฉุ ุฑูุงุถุฉุ ูุฌุจุงุช)</p>
              
              <div class="fixed-tasks" id="fixedTasks">
                <div class="fixed-task-item">
                  <div class="form-row">
                    <div class="form-group flex-grow">
                      <label>ุงุณู ุงููููุฉ</label>
                      <input type="text" name="fixedTaskName" placeholder="ูุซุงู: ุตูุงุฉ / ุฑูุงุถุฉ">
                    </div>
                    <div class="form-group">
                      <label>ุงูุฃููููุฉ</label>
                      <select name="fixedTaskPriority">
                        <option value="high">ุนุงููุฉ</option>
                        <option value="medium" selected>ูุชูุณุทุฉ</option>
                        <option value="low">ููุฎูุถุฉ</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group">
                      <label>ูู ุงูุณุงุนุฉ</label>
                      <input type="time" name="fixedTaskStart" value="17:00">
                    </div>
                    <div class="form-group">
                      <label>ุฅูู ุงูุณุงุนุฉ</label>
                      <input type="time" name="fixedTaskEnd" value="18:00">
                    </div>
                  </div>
                  <div class="form-group">
                    <label>ุงูุฃูุงู</label>
                    <div class="days-selector">
                      <label class="day-checkbox"><input type="checkbox" name="fixedTaskDays" value="sunday" checked> ุฃุญุฏ</label>
                      <label class="day-checkbox"><input type="checkbox" name="fixedTaskDays" value="monday" checked> ุงุซููู</label>
                      <label class="day-checkbox"><input type="checkbox" name="fixedTaskDays" value="tuesday" checked> ุซูุงุซุงุก</label>
                      <label class="day-checkbox"><input type="checkbox" name="fixedTaskDays" value="wednesday" checked> ุฃุฑุจุนุงุก</label>
                      <label class="day-checkbox"><input type="checkbox" name="fixedTaskDays" value="thursday" checked> ุฎููุณ</label>
                      <label class="day-checkbox"><input type="checkbox" name="fixedTaskDays" value="friday" checked> ุฌูุนุฉ</label>
                      <label class="day-checkbox"><input type="checkbox" name="fixedTaskDays" value="saturday" checked> ุณุจุช</label>
                    </div>
                  </div>
                  <div class="form-group text-left">
                    <button type="button" class="btn btn-danger btn-sm remove-fixed-task">
                      <i class="fa-solid fa-trash"></i> ุญุฐู ุงููููุฉ
                    </button>
                  </div>
                </div>
              </div>
              <button type="button" class="btn btn-secondary" id="addFixedTask">
                <span class="btn-icon"><i class="fa-solid fa-plus"></i></span>
                ุฅุถุงูุฉ ูููุฉ ุซุงุจุชุฉ
              </button>
            </div>
          </div>

          <!-- Step 2: ุงูุฃูุฏุงู -->
          <div class="form-step" data-step="2">
            <div class="step-content">
              <h3>๐ฏ ุงูุฃูุฏุงู ูุงูุชูุงููู</h3>
              <p class="step-description">ุงูุชุจ ูุฏูู ูุณูููู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุจุทุฑุญ ุฃุณุฆูุฉ ููููู ุฃูุถู</p>
              
              <div class="goals" id="goals">
                <div class="goal-item">
                  <!-- ูุนูููุงุช ุงููุฏู ุงูุฃุณุงุณูุฉ -->
                  <div class="goal-header">
                    <div class="form-group">
                      <label>ุงููุฏู / ุงูุชูููู</label>
                      <div class="goal-input-wrapper">
                        <input type="text" name="goalName" class="goal-name-input" placeholder="ูุซุงู: ุฅููุงุก ูุดุฑูุน ุงูุจุฑูุฌุฉ">
                        <button type="button" class="btn btn-ai generate-questions-btn" title="ุชูููุฏ ุฃุณุฆูุฉ">
                          <i class="fa-solid fa-wand-magic-sparkles"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                  
                  <div class="form-row">
                    <div class="form-group">
                      <label>ุงูููุนุฏ ุงูููุงุฆู</label>
                      <input type="date" name="goalDeadline">
                    </div>
                    <div class="form-group">
                      <label>ุงูููุช ุงููุชููุน (ุณุงุนุงุช)</label>
                      <input type="number" name="goalEstimatedHours" placeholder="20" min="1" max="500">
                    </div>
                    <div class="form-group">
                      <label>ุงูุฃููููุฉ</label>
                      <select name="goalPriority">
                        <option value="high">ุนุงููุฉ</option>
                        <option value="medium" selected>ูุชูุณุทุฉ</option>
                        <option value="low">ููุฎูุถุฉ</option>
                      </select>
                    </div>
                  </div>
                  
                  <!-- ุฃุณุฆูุฉ AI ุงูุฏููุงููููุฉ - ุชูููุฏ ุชููุงุฆูุงู -->
                  <div class="goal-ai-questions" style="display: none;">
                    <div class="ai-questions-header">
                      <span class="ai-icon">๐ค</span>
                      <span class="ai-questions-title">ุฃุณุฆูุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู</span>
                      <span class="ai-loading" style="display: none;">
                        <i class="fa-solid fa-spinner fa-spin"></i> ุฌุงุฑู ุงูุชูููุฑ...
                      </span>
                    </div>
                    
                    <div class="ai-generated-questions">
                      <!-- ุงูุฃุณุฆูุฉ ุณุชูููุฏ ููุง ุฏููุงููููุงู -->
                    </div>
                  </div>
                  
                  <div class="form-group text-left">
                    <button type="button" class="btn btn-danger btn-sm remove-goal">
                      <i class="fa-solid fa-trash"></i> ุญุฐู ุงููุฏู
                    </button>
                  </div>
                </div>
              </div>
              <button type="button" class="btn btn-secondary" id="addGoal">
                <span class="btn-icon"><i class="fa-solid fa-plus"></i></span>
                ุฅุถุงูุฉ ูุฏู ุขุฎุฑ
              </button>
            </div>
          </div>

          <!-- Step 3: ุงูุฅุนุฏุงุฏุงุช (ูุนูููุงุช ุดุฎุตูุฉ + ุชูุถููุงุช) -->
          <div class="form-step" data-step="3">
            <div class="step-content">
              <h3>โ๏ธ ุงูุฅุนุฏุงุฏุงุช ุงูุดุฎุตูุฉ</h3>
              <p class="step-description">ุชุฎุตูุต ุงูุฌุฏูู ูููุงุณุจ ุฃุณููุจ ุญูุงุชู</p>

              <div class="personal-info-container">
                <div class="form-row">
                  <div class="form-group">
                    <label>ููุน ุงููุณุชุฎุฏู</label>
                    <select name="userType">
                      <option value="">ุงุฎุชุฑ...</option>
                      <option value="student">ุทุงูุจ</option>
                      <option value="employee">ููุธู</option>
                      <option value="freelancer">ุนูู ุญุฑ</option>
                      <option value="business_owner">ุตุงุญุจ ุนูู</option>
                      <option value="other">ุขุฎุฑ</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>ูุณุชูู ุงูุทุงูุฉ</label>
                    <select name="energyLevel">
                      <option value="">ุงุฎุชุฑ...</option>
                      <option value="morning_person">ุตุจุงุญู (ุฃุณุชููุธ ุจุงูุฑุงู)</option>
                      <option value="night_owl">ูููู (ุฃุณูุฑ ูุชุฃุฎุฑุงู)</option>
                      <option value="balanced">ูุชูุงุฒู</option>
                    </select>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>ุณุงุนุงุช ุงูููู ุงููุนุชุงุฏุฉ</label>
                    <div class="sleep-time-inputs">
                      <div class="time-input-group">
                        <label class="sub-label">ุงูููู</label>
                        <input type="time" name="sleepTime" value="23:00">
                      </div>
                      <div class="time-input-group">
                        <label class="sub-label">ุงูุงุณุชููุงุธ</label>
                        <input type="time" name="wakeTime" value="07:00">
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <hr class="section-divider" style="margin: 2rem 0; border: 0; border-top: 1px solid var(--border);">

              <div class="schedule-preferences-container">
                <!-- ูุซุงูุฉ ุงูุฌุฏูู -->
                <div class="preference-section">
                  <label class="preference-label">ูุซุงูุฉ ุงูุฌุฏูู</label>
                  <div class="intensity-options">
                    <label class="intensity-card">
                      <input type="radio" name="scheduleIntensity" value="relaxed">
                      <span class="intensity-content">
                        <span class="intensity-icon">๐ฟ</span>
                        <span class="intensity-title">ูุฑู</span>
                        <span class="intensity-desc">ูุชุฑุงุช ุฑุงุญุฉ ูุซูุฑุฉุ ุถุบุท ุฃูู</span>
                      </span>
                    </label>
                    <label class="intensity-card">
                      <input type="radio" name="scheduleIntensity" value="moderate" checked>
                      <span class="intensity-content">
                        <span class="intensity-icon">โ๏ธ</span>
                        <span class="intensity-title">ูุชูุณุท</span>
                        <span class="intensity-desc">ุชูุงุฒู ุจูู ุงูุนูู ูุงูุฑุงุญุฉ</span>
                      </span>
                    </label>
                    <label class="intensity-card">
                      <input type="radio" name="scheduleIntensity" value="intensive">
                      <span class="intensity-content">
                        <span class="intensity-icon">๐ฅ</span>
                        <span class="intensity-title">ููุซู</span>
                        <span class="intensity-desc">ุฅูุชุงุฌูุฉ ูุตููุ ูุชุฑุงุช ุฑุงุญุฉ ููููุฉ</span>
                      </span>
                    </label>
                  </div>
                </div>

                <!-- ุฃููุงุช ุงูุนูู -->
                <div class="form-row">
                  <div class="form-group">
                    <label>ุฃุจูุฑ ููุช ููููุงู</label>
                    <input type="time" name="earliestTaskTime" value="08:00">
                  </div>
                  <div class="form-group">
                    <label>ุขุฎุฑ ููุช ููููุงู</label>
                    <input type="time" name="latestTaskTime" value="22:00">
                  </div>
                </div>

                <!-- ุฃูุงู ุงูุฑุงุญุฉ -->
                <div class="form-group">
                  <label>ุฃูุงู ุงูุฑุงุญุฉ (ูุง ุชุฌุฏูู ูููุง ููุงู)</label>
                  <div class="days-selector rest-days">
                    <label class="day-checkbox"><input type="checkbox" name="restDays" value="sunday"> ุฃุญุฏ</label>
                    <label class="day-checkbox"><input type="checkbox" name="restDays" value="monday"> ุงุซููู</label>
                    <label class="day-checkbox"><input type="checkbox" name="restDays" value="tuesday"> ุซูุงุซุงุก</label>
                    <label class="day-checkbox"><input type="checkbox" name="restDays" value="wednesday"> ุฃุฑุจุนุงุก</label>
                    <label class="day-checkbox"><input type="checkbox" name="restDays" value="thursday"> ุฎููุณ</label>
                    <label class="day-checkbox"><input type="checkbox" name="restDays" value="friday" checked> ุฌูุนุฉ</label>
                    <label class="day-checkbox"><input type="checkbox" name="restDays" value="saturday"> ุณุจุช</label>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Form Navigation -->
          <div class="form-navigation">
            <button type="button" class="btn btn-secondary" id="prevStep" disabled>ุงูุณุงุจู</button>
            <button type="button" class="btn btn-primary" id="nextStep">ุงูุชุงูู</button>
            <button type="submit" class="btn btn-success" id="submitForm" style="display: none;">
              <span class="btn-icon"><i class="fa-solid fa-wand-magic-sparkles"></i></span>
              ุฅูุดุงุก ุงูุชูููู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- Add/Edit Event Modal -->
  <div class="modal-overlay" id="eventModal">
    <div class="modal-container">
      <div class="modal-header">
        <button class="modal-close" id="closeEventModal" aria-label="ุฅุบูุงู">
          <i class="fa-solid fa-xmark" aria-hidden="true"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="eventForm" class="event-form">
          <div class="form-group">
            <label for="eventTitle">ุนููุงู ุงูุญุฏุซ</label>
            <input type="text" id="eventTitle" name="eventTitle" placeholder="ูุซุงู: ุงุฌุชูุงุน ุงููุฑูู" required>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="eventDate">ุงูุชุงุฑูุฎ</label>
              <input type="date" id="eventDate" name="eventDate" required>
            </div>
            <div class="form-group">
              <label for="eventStart">ููุช ุงูุจุฏุงูุฉ</label>
              <input type="time" id="eventStart" name="eventStart">
            </div>
            <div class="form-group">
              <label for="eventEnd">ููุช ุงูููุงูุฉ</label>
              <input type="time" id="eventEnd" name="eventEnd">
            </div>
          </div>
          
                    <!-- Repeat Options (Added RRule Support) -->
                    <div class="form-group">
                      <label for="eventRepeat">ุงูุชูุฑุงุฑ</label>
                      <select id="eventRepeat" name="eventRepeat" class="form-select">
                        <option value="none">ูุง ูุชูุฑุฑ</option>
                        <option value="daily">ููููุงู</option>
                        <option value="weekly">ุฃุณุจูุนูุงู</option>
                        <option value="monthly">ุดูุฑูุงู</option>
                        <option value="yearly">ุณูููุงู</option>
                        <option value="custom">ูุฎุตุต...</option>
                      </select>
                    </div>
                    
                    <!-- Custom Repeat Options (Hidden by default) -->
                    <div id="customRepeatOptions" class="custom-repeat-options" style="display: none;">
                      <div class="form-row">
                        <div class="form-group">
                          <label>ูู</label>
                          <div class="interval-input">
                            <input type="number" id="repeatInterval" name="repeatInterval" value="1" min="1" max="99">
                            <select id="repeatFrequency" name="repeatFrequency">
                              <option value="DAILY">ููู</option>
                              <option value="WEEKLY">ุฃุณุจูุน</option>
                              <option value="MONTHLY">ุดูุฑ</option>
                              <option value="YEARLY">ุณูุฉ</option>
                            </select>
                          </div>
                        </div>
                      </div>
                      
                      <!-- Weekly: Days selection -->
                      <div id="weeklyDaysContainer" class="form-group" style="display: none;">
                        <label>ูู ุฃูุงู</label>
                        <div class="days-selector">
                          <label class="day-checkbox"><input type="checkbox" name="repeatDays" value="SU"> ุฃุญุฏ</label>
                          <label class="day-checkbox"><input type="checkbox" name="repeatDays" value="MO"> ุงุซููู</label>
                          <label class="day-checkbox"><input type="checkbox" name="repeatDays" value="TU"> ุซูุงุซุงุก</label>
                          <label class="day-checkbox"><input type="checkbox" name="repeatDays" value="WE"> ุฃุฑุจุนุงุก</label>
                          <label class="day-checkbox"><input type="checkbox" name="repeatDays" value="TH"> ุฎููุณ</label>
                          <label class="day-checkbox"><input type="checkbox" name="repeatDays" value="FR"> ุฌูุนุฉ</label>
                          <label class="day-checkbox"><input type="checkbox" name="repeatDays" value="SA"> ุณุจุช</label>
                        </div>
                      </div>
                      
                      <!-- Monthly: Day of month -->
                      <div id="monthlyDayContainer" class="form-group" style="display: none;">
                        <label>ูู ููู</label>
                        <select id="repeatMonthDay" name="repeatMonthDay">
                          <option value="">ููุณ ุงูููู ูู ุงูุดูุฑ</option>
                          <option value="1">1</option>
                          <option value="15">15</option>
                          <option value="-1">ุขุฎุฑ ููู</option>
                        </select>
                      </div>
                      
                      <!-- End condition -->
                      <div class="form-group">
                        <label>ููุชูู</label>
                        <select id="repeatEndType" name="repeatEndType">
                          <option value="never">ูุง ููุชูู</option>
                          <option value="count">ุจุนุฏ ุนุฏุฏ ูุฑุงุช</option>
                          <option value="until">ูู ุชุงุฑูุฎ</option>
                        </select>
                      </div>
                      
                      <div id="repeatCountContainer" class="form-group" style="display: none;">
                        <label>ุนุฏุฏ ุงูุชูุฑุงุฑุงุช</label>
                        <input type="number" id="repeatCount" name="repeatCount" value="10" min="1" max="999">
                      </div>
                      
                      <div id="repeatUntilContainer" class="form-group" style="display: none;">
                        <label>ุญุชู ุชุงุฑูุฎ</label>
                        <input type="date" id="repeatUntil" name="repeatUntil">
                      </div>
                    </div>

          <div class="form-group">
            <label for="eventDescription">ุงููุตู (ุงุฎุชูุงุฑู)</label>
            <textarea id="eventDescription" name="eventDescription" rows="3"
              placeholder="ุชูุงุตูู ุฅุถุงููุฉ ุญูู ุงูุญุฏุซ"></textarea>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary event-submit">
              <span class="btn-icon" aria-hidden="true">
                <i class="fa-solid fa-plus"></i>
              </span>
              ุฅุถุงูุฉ ุงูุญุฏุซ
            </button>
            <button type="button" class="btn btn-danger event-delete" id="deleteEventBtn" style="display: none;">
              <span class="btn-icon" aria-hidden="true">
                <i class="fa-solid fa-trash"></i>
              </span>
              ุญุฐู ุงูุญุฏุซ
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- JavaScript Modules -->
  <!-- Import Map for ES Modules -->
  <script type="importmap">
  {
    "imports": {
      "@fullcalendar/core": "https://esm.sh/@fullcalendar/core@6.1.19",
      "@fullcalendar/daygrid": "https://esm.sh/@fullcalendar/daygrid@6.1.19",
      "@fullcalendar/timegrid": "https://esm.sh/@fullcalendar/timegrid@6.1.19",
      "@fullcalendar/list": "https://esm.sh/@fullcalendar/list@6.1.19",
      "@fullcalendar/rrule": "https://esm.sh/@fullcalendar/rrule@6.1.19",
      "rrule": "https://esm.sh/rrule@2.8.1"
    }
  }
  </script>
  <script type="module" src="../assets/js/core/theme.js"></script>
  <script type="module" src="../assets/js/core/sidebar.js"></script>
  <script type="module" src="../assets/js/components/calendar/CalendarEvents/CalendarEventsManager.js"></script>
  <script type="module" src="../assets/js/components/calendar/EventForm/EventFormManager.js"></script>
  
  <script type="module" src="../assets/js/core/utils/auth.js"></script>
  
</body>

</html>
